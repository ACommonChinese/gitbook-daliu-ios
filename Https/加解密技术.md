# 加解密技术

那么加密码是怎么回事呢? 简单来说可以理解成一个数学函数, 给一个x(原始数据), 生成一个新的结果y, 然后把y发给服务器, 服务器知道如何解这个函数, 服务器能根据y解析出来x(原始数据), 而中间有黑客拦截了数据, 看到的是乱码, 无法解开原始数据.     

一般可以说有两个加解密方案(Encryption Types):
- 共享密钥加密, Symmetric(对称的) Key
- 相互交换密钥的公开密钥加密技术 Public key encryption( 即我们通常讲的非对称加密)

那么如何做到呢? 这就要谈谈对称加解密和非对称加解密, 从不严格上的意义讲, 对称加密可以理解为只有一个密钥, 使用这个密钥对数据加密, 同时也可以使用这个密钥解密(当然并不严格, 严格意义上讲是对称加密的钥匙可以互导).  比如常见的AES, DES, 3DES, IDEA 都是对称加密算法, 对称加密算法加解密速度快, 但安全性受到置疑. 这种加密和解密同用一个密钥的方式也被称为共享密钥加密(Common key crypto system), 这种加密方式虽然速度相对较快, 但有两个困境: 
1. 如何把这个密钥发送给对方.   
2. 如果多个端进行交流, 多个端都要安全的保存密钥  

在互联网上转发密钥时, 如果通信被监听那么密钥就会落入攻击者之手, 多个端进行交流, 每个端都要安全保存密钥, 其保密性不够安全

于是引到另一种加密码方案: 非对称加密, 非对称加密有两个钥匙, 一个公钥, 一个私钥, 一般公钥是公共可见的, 大家都可以下载的到看得到, 但私钥必须保密, 一般保存在服务器端. 目前流得的非对称加解密算法就是RSA, 1977年由 Ron Rivest、Adi Shamir 和 Leonard Adleman 一起提出, RSA就是他们三人姓氏开头字母拼在一起组成的, 其数学原理是对极大整数做因数分解非常困难, 比如两个大素数p和q相乘得到乘积n比较容易计算，但从它们的乘积n分解为两个大素数p和q则十分困难。如果n为足够大，当前的算法不可能在有效的时间内实现  

非对称加密RSA公开密钥密码体制, 所谓的公开密钥密码体制是指加密密钥与解密密钥是不同的两个密钥, 加密密钥可以公共, 但由公开的加密密钥推导出解密密钥在计算上是不可行的. 也就是说知道了加密密钥无法推导出解密密钥, 这样公私钥分离, 而不是使用同一个, 这就解决了大量网络用户密钥管理的难题  

- 加密密钥 PK (Private Key), 公开, 但无法由它计算出解密密钥(SK)
- 解密密钥 SK (Secret Key), 不公开, 完全保密
- 加密密钥和解密密钥成对出现
- 加密算法 E (Encryption) 公开
- 解密算法 D (Decryption) 公开
- 一般称加密密钥为公钥, 解密密钥和私钥, 公钥加密对应私钥解密; 私钥签名对应公钥验证签名(RSA算法是第一个能同时用于加密和数字签名的算法);
- RSA 密钥一般推荐至少1024位

RSA(非对称加密算法)并不能替代DES(对称加密算法)，它们的优缺点正好互补。 RSA的密钥很长，加密速度慢，而采用DES，正好弥补了RSA的缺点。即DES用于明文加密，RSA用于DES密钥的加密。由于DES加密速度快，适合加密较长的报文, 而RSA可解决DES密钥分配的问题。美国的保密增强邮件（PEM）就是采用了RSA 和DES结合的方法，目前已成为E-MAIL保密通信标准

SET(*Secure Electronic Transaction)*协议中要求[CA](https://baike.baidu.com/item/CA)采用2048[bits](https://baike.baidu.com/item/bits)长的密钥，其他实体使用1024比特的密钥。**RSA密钥长度随着保密级别提高，增加很快。**下表列出了对同一安全级别所对应的密钥长度。  

| 保密级别 | 对称密钥长度（bit） | RSA密钥长度（bit） | ECC密钥长度（bit） | 保密年限 |
| -------- | ------------------- | ------------------ | ------------------ | -------- |
| 80       | 80                  | 1024               | 160                | 2010     |
| 112      | 112                 | 2048               | 224                | 2030     |
| 128      | 128                 | 3072               | 256                | 2040     |
| 192      | 192                 | 7680               | 384                | 2080     |
| 256      | 256                 | 15360              | 512                | 2120     |

比较:  
- Symmetric Key
    - Same key used to encrypt and decrypt
    - Faster compared to public key encryption
    - Key needs to be stored securely
    - Secure channel required to transfer the key
- Public key encryption(公钥加密机制, 即我们通常讲的非对称加密
    - Uses a public key and private key
    - Slower compared with Symmetric Key

由于对称加解密的快速和非对称加解密的强安全性, 因此HTTPS采用混合加密机制, 采用共享密钥加密和公开密钥加密两者并用的混合加密机制.  